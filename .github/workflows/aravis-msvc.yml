
name: Test Opencv
on: push

jobs:
  test:
    runs-on: ubuntu-latest
    name: Test the action
    steps:
    - uses: actions/checkout@v3
    - name: add key
      run: |
        sudo apt-get update && sudo apt-get -y install build-essential cmake libgtk-3-dev git 
        mkdir install
        
    - name: build
      run: |
        sudo apt update && sudo apt install -y cmake g++ wget unzip
        # Download and unpack sources
        git clone https://github.com/opencv/opencv.git -b 4.5.5
        cd opencv && mkdir -p build && cd build
        # Build
        cmake -GNinja -D CMAKE_BUILD_TYPE=Release -DBUILD_opencv_java=OFF -DBUILD_opencv_python=OFF -D CMAKE_INSTALL_PREFIX=install ../
        cmake --build . --config Release --target install
                
   
    - uses: actions/upload-artifact@v4
      with:
       name: opencv-4.5.5-x86-64-linux.tar.gz
       path: install/* 
        
